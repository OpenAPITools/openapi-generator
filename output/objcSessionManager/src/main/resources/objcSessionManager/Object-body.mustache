#import "{{classPrefix}}Object.h"

@implementation {{classPrefix}}Object

// workaround for JSONModel multithreading issues
// https://github.com/icanzilb/JSONModel/issues/441
- (instancetype)initWithDictionary:(NSDictionary *)dict error:(NSError **)err
{
    static NSMutableSet *classNames;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        classNames = [NSMutableSet new];
    });
    
    BOOL initSync;
    @synchronized([self class])
    {
        NSString *className = NSStringFromClass([self class]);
        initSync = ![classNames containsObject:className];
        if(initSync)
        {
            [classNames addObject:className];
            self = [super initWithDictionary:dict error:err];
        }
    }
    if(!initSync)
    {
        self = [super initWithDictionary:dict error:err];
    }
    return self;
}

@end
