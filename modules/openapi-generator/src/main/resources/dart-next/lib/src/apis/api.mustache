import 'dart:convert';
import 'package:meta/meta.dart';
import 'package:{{pubName}}/_internal.dart';
import 'package:xml/xml.dart';
import 'dart:typed_data';

{{#operations}}
part '{{classFilename}}.models.dart';
{{/operations}}

{{#operations}}
class {{classname}} {
  final NetworkingClientBase networkingClient;
  final Uri baseUrl;
  final Map<String, dynamic> context;

  const {{classname}}({
    required this.networkingClient,
    required this.baseUrl,
    this.context = const {},
  });

  {{#operation}}
  {{#isDeprecated}}
  @Deprecated('This operation has been deprecated')
  {{/isDeprecated}}
  Future<{{classname}}{{operationIdCamelCase}}Response> {{operationId}}(
    {{classname}}{{operationIdCamelCase}}Request request, {
    Map<String, dynamic> context = const {},
  }) async {
    final newContext = {...this.context, ...context};
    final httpRequest = await request.createHttpRequest(
      context: newContext,
      baseUrl: baseUrl,
    );
    final response = await networkingClient.sendRequest(httpRequest);
    return {{classname}}{{operationIdCamelCase}}Response.fromResponse(
      response,
      context: newContext,
    );
  }
  {{/operation}}
}
{{/operations}}