import 'package:built_collection/built_collection.dart';
import 'package:built_value/serializer.dart';
import 'package:time_machine/time_machine.dart';

class LocalDateSerializer implements PrimitiveSerializer<LocalDate> {
  @override
  Iterable<Type> get types => BuiltList<Type>([LocalDate]);

    @override
    String get wireName => "LocalDate";

    @override
    LocalDate deserialize(Serializers serializers, Object serialized,
    {FullType specifiedType = FullType.unspecified}) {
    return LocalDate.dateTime(DateTime.parse(serialized as String));
    }

    @override
    Object serialize(Serializers serializers, LocalDate localDate,
    {FullType specifiedType = FullType.unspecified}) {
    return localDate.toString('yyyy-MM-dd');
    }
}

class LocalDateTimeSerializer implements PrimitiveSerializer<LocalDateTime> {
  @override
  Iterable<Type> get types => BuiltList<Type>([LocalDateTime]);

    @override
    String get wireName => "LocalDateTime";

    @override
    LocalDateTime deserialize(Serializers serializers, Object serialized,
    {FullType specifiedType = FullType.unspecified}) {
    return LocalDateTime.dateTime(DateTime.parse(serialized as String));
    }

    @override
    Object serialize(Serializers serializers, LocalDateTime localDateTime,
    {FullType specifiedType = FullType.unspecified}) {
    return localDateTime.toString('yyyy-MM-dd HH:mm:ss');
    }
}
