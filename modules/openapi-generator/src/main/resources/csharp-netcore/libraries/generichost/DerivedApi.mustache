// this file was initially auto generated
// it will not be overwritten

{{>partial_header}}

using System;
using System.Collections.Generic;
using System.Net;
using System.Threading.Tasks;
using Microsoft.Extensions.Logging;
using System.Net.Http;
using System.Net.Http.Headers;
using System.Text.Json;
using {{packageName}}.Client;
using {{packageName}}.{{modelPackage}};

namespace {{packageName}}.{{derivedApiPackage}}
{
    {{#apiInfo}}
    {{#apis}}
    {{#operations}}
    /// <summary>
    /// Validate requests and process server responses
    /// </summary>
    {{>visibility}} class {{classname}} : {{apiPackage}}.{{classname}}
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="{{classname}}"/> class.
        /// </summary>
        /// <returns></returns>
        public {{classname}}(ILogger<{{apiPackage}}.{{classname}}> logger, HttpClient httpClient, JsonSerializerOptionsProvider jsonSerializerOptionsProvider{{#hasApiKeyMethods}}, 
            TokenProvider<ApiKeyToken> apiKeyProvider{{/hasApiKeyMethods}}{{#hasHttpBearerMethods}},
            TokenProvider<BearerToken> bearerTokenProvider{{/hasHttpBearerMethods}}{{#hasHttpBasicMethods}},
            TokenProvider<BasicToken> basicTokenProvider{{/hasHttpBasicMethods}}{{#hasHttpSignatureMethods}},
            TokenProvider<HttpSignatureToken> httpSignatureTokenProvider{{/hasHttpSignatureMethods}}{{#hasOAuthMethods}},
            TokenProvider<OAuthToken> oauthTokenProvider{{/hasOAuthMethods}}
        )
        : base (logger, httpClient, jsonSerializerOptionsProvider{{#hasApiKeyMethods}}, 
            apiKeyProvider{{/hasApiKeyMethods}}{{#hasHttpBearerMethods}}, 
            bearerTokenProvider{{/hasHttpBearerMethods}}{{#hasHttpBasicMethods}}, 
            basicTokenProvider{{/hasHttpBasicMethods}}{{#hasHttpSignatureMethods}}, 
            httpSignatureTokenProvider{{/hasHttpSignatureMethods}}{{#hasOAuthMethods}}, 
            oauthTokenProvider{{/hasOAuthMethods}})
        {
        }

        {{#operation}}
        /// <summary>
        /// Validates the request parameters
        /// </summary>
        {{#allParams}}
        /// <param name="{{paramName}}"></param>
        {{/allParams}}
        /// <returns></returns>
        protected override {{^allParams}}void{{/allParams}}{{#allParams}}{{#-first}}{{^-last}}({{/-last}}{{/-first}}{{#requiredAndNotNullable}}{{#lambda.required}}{{{dataType}}}{{/lambda.required}}{{^-last}}, {{/-last}}{{/requiredAndNotNullable}}{{^requiredAndNotNullable}}{{#lambda.optional}}{{{dataType}}}{{/lambda.optional}}{{^-last}}, {{/-last}}{{/requiredAndNotNullable}}{{#-last}}{{^-first}}){{/-first}}{{/-last}}{{/allParams}} On{{operationId}}({{#allParams}}{{#requiredAndNotNullable}}{{#lambda.required}}{{{dataType}}}{{/lambda.required}} {{paramName}}{{^-last}}, {{/-last}}{{/requiredAndNotNullable}}{{^requiredAndNotNullable}}{{#lambda.optional}}{{{dataType}}}{{/lambda.optional}} {{paramName}}{{^-last}}, {{/-last}}{{/requiredAndNotNullable}}{{/allParams}})
        {
            {{^allParams}}
            {{#-first}}base.On{{operationId}}();
            {{/-first}}
            {{/allParams}}
            {{#allParams}}
            {{#-first}}
            return base.On{{operationId}}({{/-first}}{{paramName}}{{^-last}}, {{/-last}}{{#-last}});{{/-last}}{{/allParams}}
        }

        /// <summary>
        /// Processes the server response
        /// </summary>
        /// <param name="apiResponse"></param>
        {{#allParams}}
        /// <param name="{{paramName}}"></param>
        {{/allParams}}
        protected override void After{{operationId}}({{#lambda.joinWithComma}}ApiResponse<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}object{{/returnType}}{{nrt?}}> apiResponse  {{#allParams}}{{#required}}{{#lambda.required}}{{{dataType}}}{{/lambda.required}} {{paramName}}  {{/required}}{{^required}}{{#lambda.optional}}{{{dataType}}}{{/lambda.optional}} {{paramName}}  {{/required}}{{/allParams}}{{/lambda.joinWithComma}})
        {
            base.After{{operationId}}({{#lambda.joinWithComma}}apiResponse  {{#allParams}}{{paramName}}  {{/allParams}}{{/lambda.joinWithComma}});
        }
        {{^-last}}

        {{/-last}}
        {{/operation}}
    }
    {{^-last}}

    {{/-last}}
    {{/operations}}
    {{/apis}}
    {{/apiInfo}}
}
