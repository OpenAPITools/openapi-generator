from __future__ import annotations
import pprint
{{#vendorExtensions.x-py-model-imports}}
{{{.}}}
{{/vendorExtensions.x-py-model-imports}}
from pydantic import Field, RootModel
from typing import Any, Dict, Union, Self

{{#lambda.uppercase}}{{{classname}}}{{/lambda.uppercase}}_ANY_OF_SCHEMAS = [{{#anyOf}}"{{.}}"{{^-last}}, {{/-last}}{{/anyOf}}]


class {{classname}}(RootModel[Union[{{#anyOf}}{{.}}{{^-last}}, {{/-last}}{{/anyOf}}]]):
    """
    {{{description}}}{{^description}}{{{classname}}}{{/description}}
    """

    root: Union[{{#anyOf}}{{.}}{{^-last}}, {{/-last}}{{/anyOf}}{{#isNullable}}, None{{/isNullable}}] = Field(
        {{#isNullable}}None{{/isNullable}}{{^isNullable}}...{{/isNullable}}{{#discriminator}}, discriminator="{{discriminatorName}}"{{/discriminator}}
    )

    def __getattr__(self, name):
        """
        Delegate attribute access to the root model if the attribute
        doesn't exist on the main class.
        """

        if name in self.__dict__:
            return super().__getattribute__(name)

        root = self.__dict__.get('root')
        if root is not None:
            return getattr(root, name)

        raise AttributeError(f"'{self.__class__.__name__}' object has no attribute '{name}'")

    @classmethod
    def from_dict(cls, obj: Dict[str, Any]) -> Self:
        """Returns the object represented by the Dict"""
        return cls.model_validate(obj)

    @classmethod
    def from_json(cls, json_str: str) -> Self:
        """Returns the object represented by the json string"""
        return cls.model_validate_json(json_str)

    def to_json(self) -> str:
        """Returns the JSON representation of the actual instance"""
        return self.model_dump_json(by_alias=True)

    def to_dict(self) -> Dict[str, Any]:
        """Returns the dict representation of the actual instance"""
        return self.model_dump(by_alias=True)

    def to_str(self) -> str:
        """Returns the string representation of the actual instance"""
        return pprint.pformat(self.model_dump(by_alias=True, mode="json"))

{{#vendorExtensions.x-py-postponed-model-imports.size}}
{{#vendorExtensions.x-py-postponed-model-imports}}
{{{.}}}
{{/vendorExtensions.x-py-postponed-model-imports}}
# TODO: Rewrite to not use raise_errors
{{classname}}.model_rebuild(raise_errors=False)
{{/vendorExtensions.x-py-postponed-model-imports.size}}
