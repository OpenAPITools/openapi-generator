{{>partial_header}}
{{#models}}
{{#model}}
{{#description}}
 * Schema {{{classname}}} : {{{description}}}
 *)
{{/description}}

{{!-- for enum schemas --}}
{{#isEnum}}
(* {{{description}}} *)
type t =
{{#allowableValues}}{{#enumVars}}
| {{name}}
{{/enumVars}}{{/allowableValues}}
{{/isEnum}}

{{!-- for non-enum schemas --}}

{{!-- for properties that are of enum type --}}
{{#vars}}
{{#isEnum}}
(** {{{description}}} *)
type {{name}} =
{{#allowableValues}}
{{#enumVars}}
| {{name}}
{{/enumVars}}
{{/allowableValues}}
[@@deriving yojson];;
{{/isEnum}}
{{/vars}}

{{^isEnum}}
type t = {
{{#vars}}
    {{#description}}
    (* {{{description}}} *)
    {{/description}}
    {{#isEnum}}
    (*{{{name}}}: [{{#allowableValues}}{{#enumVars}}`{{name}}{{^-last}} | {{/-last}}{{/enumVars}}{{/allowableValues}}]{{^isListContainer}}{{#required}}{{#isNullable}} option{{/isNullable}}{{/required}}{{/isListContainer}}{{^isListContainer}}{{^required}} option{{/required}}{{/isListContainer}};*)
    {{{name}}}: {{{name}}}{{^isListContainer}}{{#required}}{{#isNullable}} option{{/isNullable}}{{/required}}{{/isListContainer}}{{^isListContainer}}{{^required}} option{{/required}}{{/isListContainer}};
    {{/isEnum}}
    {{^isEnum}}
    {{{name}}}: {{{dataType}}}{{^isListContainer}}{{#required}}{{#isNullable}} option{{/isNullable}}{{/required}}{{/isListContainer}}{{^isListContainer}}{{^required}} option{{/required}}{{/isListContainer}};
    {{/isEnum}}
{{/vars}}
} [@@deriving yojson];;

{{#description}}
(** {{{description}}} *)
{{/description}}
let create {{#requiredVars}}({{{name}}} : {{{dataType}}}{{#isNullable}}option{{/isNullable}}){{^-last}} {{/-last}}{{/requiredVars}}{{^hasRequired}}(){{/hasRequired}} : t = {
    {{#vars}}
    {{{name}}} = {{#required}}{{{name}}}{{/required}}{{^required}}{{#isListContainer}}[]{{/isListContainer}}{{#isMapContainer}}Hashtbl.create 7{{/isMapContainer}}{{^isContainer}}None{{/isContainer}}{{/required}};
    {{/vars}}
}
{{/isEnum}}

{{/model}}
{{/models}}
