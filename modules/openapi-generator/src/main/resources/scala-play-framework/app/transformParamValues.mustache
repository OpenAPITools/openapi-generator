{{!
  Input if isCollectionFormatMulti:
    val extracted: Option[Seq[String]]
  Input if !isCollectionFormatMulti:
    val extracted: Option[String]
}}
{{#collectionFormat}}
{{^isCollectionFormatMulti}}
  .map(values => splitCollectionParam(values, "{{collectionFormat}}"))
{{/isCollectionFormatMulti}}
{{#isCollectionFormatMulti}}
  .map(_.toList)
{{/isCollectionFormatMulti}}
{{#items}}
{{^isString}}
  .map(_.map(value => {{>convertParam}})
{{/isString}}
{{/items}}
{{/collectionFormat}}
{{^collectionFormat}}
{{^isString}}
  .map(value => {{>convertParam}})
{{/isString}}
{{/collectionFormat}}
{{#required}}
  .getOrElse {
    throw new IllegalArgumentException("Missing {{#isHeaderParam}}header{{/isHeaderParam}}{{#isQueryParam}}query string{{/isQueryParam}}{{#isFormParam}}form{{/isFormParam}} parameter `{{baseName}}`.")
  }
{{/required}}