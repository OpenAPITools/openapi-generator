{{>licenseInfo}}
@file:Suppress("UnusedImport")

package {{apiPackage}}

{{#imports}}import {{import}}
{{/imports}}

import {{packageName}}.infrastructure.*
import io.ktor.client.*
import io.ktor.client.engine.*
import io.ktor.client.features.json.serializer.*
import kotlinx.coroutines.CoroutineScope
import kotlinx.coroutines.GlobalScope
import kotlinx.coroutines.promise
import kotlinx.serialization.json.Json
import kotlin.js.Promise

{{#operations}}
public open class {{{classname}}}Async : {{{classname}}} {
    public val coroutineScope: CoroutineScope

    public constructor(
        baseUrl: String = "{{{basePath}}}",
        httpClientEngine: HttpClientEngine? = null,
        json: Json = Json {},
        coroutineScope: CoroutineScope = GlobalScope,
    ) : super(baseUrl, httpClientEngine, json) {
        this.coroutineScope = coroutineScope
    }

    internal constructor(
        baseUrl: String,
        client: HttpClient,
        coroutineScope: CoroutineScope,
    ) : super(
        baseUrl,
        client,
    ) {
        this.coroutineScope = coroutineScope
    }

    {{#operation}}
    /**
     * {{summary}}
     * {{notes}}
    {{#allParams}} * @param {{{paramName}}} {{description}} {{^required}}(optional{{#defaultValue}}, default to {{{.}}}{{/defaultValue}}){{/required}}
    {{/allParams}} * @return {{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}void{{/returnType}}
     */
    public fun {{operationId}}Async(
        {{#allParams}}
        {{{paramName}}}: {{{dataType}}}{{^required}}? = null{{/required}},
        {{/allParams}}
    ): Promise<HttpResponse<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}Unit{{/returnType}}>> {
        return coroutineScope.promise {
            {{operationId}}(
                {{#allParams}}
                {{{paramName}}} = {{{paramName}}},
                {{/allParams}}
            )
        }
    }
    {{/operation}}
}
{{/operations}}
