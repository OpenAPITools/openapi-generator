swagger: "2.0"
info:
  version: 1.0.0
  title: test non regression when no x-discriminator-value
paths:
  /getItems:
    get:
      description: test
      operationId: getAllPets
      responses:
        200:
          description: 'list of PetItems'
          schema:
            type: array
            items:
              $ref: '#/definitions/Pet'
definitions:
  Other:
    type: object
    properties:
      pet:
        $ref: '#/definitions/Pet'
  PetType:
    type: string
    enum:
      - DOG
      - CAT
  Pet:
    discriminator: objectType
    required:
      - objectType
    properties:
      objectType:
        $ref: '#/definitions/PetType'

  dog:
    allOf:
      - $ref: '#/definitions/Pet'
      - type: object
        properties:
          p1:
            type: string
  Cat:
    allOf:
      - $ref: '#/definitions/Pet'
      - type: object
        properties:
          p2:
            type: string
