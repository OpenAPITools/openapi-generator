// DecodableDictionary.swift
//
// Generated by swagger-codegen
// https://github.com/swagger-api/swagger-codegen
//

import Foundation

final class DecodableDictionary<Key, Value where Key: Hashable, Key: JSONDecodable, Value: JSONDecodable>: JSONEncodable, JSONDecodable, DictionaryLiteralConvertible {
    let value: [Key:Value]
    
    init(dictionaryLiteral elements: (Key, Value)...) {
        var dic = [Key:Value]()
        for (key, value) in elements {
            dic[key] = value
        }
        self.value = dic
    }
    
    init(dictionary elements: [Key:Value]) {
        self.value = elements
    }
    
    static func decode(source: AnyObject) -> DecodableDictionary? {
        var destination = [Key:Value]()
        let dictionary = source as! [NSObject:AnyObject]
        for (key, value) in dictionary {
            let decodedKey = Key.decode(key)!
            let decodedValue = Value.decode(value)!
            destination[decodedKey] = decodedValue
        }
        return DecodableDictionary(dictionary: destination)
    }

    func encode() -> AnyObject {
        return value.encode()
    }
}
