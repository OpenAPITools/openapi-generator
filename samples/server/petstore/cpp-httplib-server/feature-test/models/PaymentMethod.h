/**
* This file is auto generated by OpenAPI Generator (https://openapi-generator.tech).
* https://openapi-generator.tech
* Do not edit the class manually.
*/

#pragma once
// System headers
#include <nlohmann/json.hpp>
#include <variant>
#include <string>
#include "BankAccount.h"
#include "CreditCard.h"



namespace models {

// oneOf schema - type alias for std::variant
using PaymentMethod = std::variant<
    CreditCard,
    BankAccount>;

// JSON serialization functions (inline for header-only)
inline void from_json(const nlohmann::json& j, PaymentMethod& obj) {
    if (!j.contains("paymentType")) {
        throw nlohmann::json::type_error::create(302, "Discriminator property 'paymentType' not found in JSON", &j);
    }
    std::string discriminatorValue = j["paymentType"].get<std::string>();
    if (discriminatorValue == "credit_card") {
        obj = j.get<CreditCard>();
        return;
    }
    if (discriminatorValue == "bank_account") {
        obj = j.get<BankAccount>();
        return;
    }
    throw nlohmann::json::type_error::create(302, "Unknown discriminator value: " + discriminatorValue, &j);
}

inline void to_json(nlohmann::json& j, const PaymentMethod& obj)
{
    std::visit([&j](const auto& val) { j = nlohmann::json(val); }, obj);
}


} // namespace models

