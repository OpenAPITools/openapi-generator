#
# OpenAPI Petstore
# 
# This is a sample server Petstore server. For this sample, you can use the api key `special-key` to test the authorization filters.
# The version of the OpenAPI document: 1.0.0
# 
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options

import model_pet_review

type PetReviewsResponse* = object
  ## 
  reviews*: Option[seq[PetReview]]
  totalCount*: Option[int]


# Custom JSON deserialization for PetReviewsResponse with custom field names
proc to*(node: JsonNode, T: typedesc[PetReviewsResponse]): PetReviewsResponse =
  result = PetReviewsResponse()
  if node.kind == JObject:
    if node.hasKey("reviews") and node["reviews"].kind != JNull:
      # Optional array of types with custom JSON - manually iterate and deserialize
      let arrayNode = node["reviews"]
      if arrayNode.kind == JArray:
        var arr: seq[PetReview] = @[]
        for item in arrayNode.items:
          arr.add(to(item, PetReview))
        result.reviews = some(arr)
    if node.hasKey("totalCount") and node["totalCount"].kind != JNull:
      result.totalCount = some(to(node["totalCount"], typeof(result.totalCount.get())))

# Custom JSON serialization for PetReviewsResponse with custom field names
proc `%`*(obj: PetReviewsResponse): JsonNode =
  result = newJObject()
  if obj.reviews.isSome():
    result["reviews"] = %obj.reviews.get()
  if obj.totalCount.isSome():
    result["totalCount"] = %obj.totalCount.get()

