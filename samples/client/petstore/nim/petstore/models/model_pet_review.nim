#
# OpenAPI Petstore
# 
# This is a sample server Petstore server. For this sample, you can use the api key `special-key` to test the authorization filters.
# The version of the OpenAPI document: 1.0.0
# 
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options


type PetReview* = object
  ## 
  id*: Option[string] ## MongoDB style ID field that should be renamed to id in Nim
  author*: Option[string]
  content*: Option[string]
  timestamp*: Option[string]


# Custom JSON deserialization for PetReview with custom field names
proc to*(node: JsonNode, T: typedesc[PetReview]): PetReview =
  result = PetReview()
  if node.kind == JObject:
    if node.hasKey("_id") and node["_id"].kind != JNull:
      result.id = some(to(node["_id"], typeof(result.id.get())))
    if node.hasKey("author") and node["author"].kind != JNull:
      result.author = some(to(node["author"], typeof(result.author.get())))
    if node.hasKey("content") and node["content"].kind != JNull:
      result.content = some(to(node["content"], typeof(result.content.get())))
    if node.hasKey("timestamp") and node["timestamp"].kind != JNull:
      result.timestamp = some(to(node["timestamp"], typeof(result.timestamp.get())))

# Custom JSON serialization for PetReview with custom field names
proc `%`*(obj: PetReview): JsonNode =
  result = newJObject()
  if obj.id.isSome():
    result["_id"] = %obj.id.get()
  if obj.author.isSome():
    result["author"] = %obj.author.get()
  if obj.content.isSome():
    result["content"] = %obj.content.get()
  if obj.timestamp.isSome():
    result["timestamp"] = %obj.timestamp.get()

