#
# OpenAPI Petstore
# 
# This is a sample server Petstore server. For this sample, you can use the api key `special-key` to test the authorization filters.
# The version of the OpenAPI document: 1.0.0
# 
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options


type Note* {.pure.} = enum
  `0`
  `1`
  `2`
  `3`

type IgnoredResponse* = object
  ## 
  reason*: Option[string]
  note*: Option[Note] ## Inline enum that should use enum type name not base type

func `%`*(v: Note): JsonNode =
  result = case v:
    of Note.`0`: %"0"
    of Note.`1`: %"1"
    of Note.`2`: %"2"
    of Note.`3`: %"3"
func `$`*(v: Note): string =
  result = case v:
    of Note.`0`: $("0")
    of Note.`1`: $("1")
    of Note.`2`: $("2")
    of Note.`3`: $("3")

proc to*(node: JsonNode, T: typedesc[Note]): Note =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum Note, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("0"):
    return Note.`0`
  of $("1"):
    return Note.`1`
  of $("2"):
    return Note.`2`
  of $("3"):
    return Note.`3`
  else:
    raise newException(ValueError, "Invalid enum value for Note: " & strVal)

