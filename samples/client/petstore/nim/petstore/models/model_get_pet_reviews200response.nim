#
# OpenAPI Petstore
# 
# This is a sample server Petstore server. For this sample, you can use the api key `special-key` to test the authorization filters.
# The version of the OpenAPI document: 1.0.0
# 
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options

import model_api_response
import model_get_pet_reviews_response_with_presence

# AnyOf type
type GetPetReviews200responseKind* {.pure.} = enum
  GetPetReviewsResponseWithPresenceVariant
  ApiResponseVariant

type GetPetReviews200response* = object
  ## 
  case kind*: GetPetReviews200responseKind
  of GetPetReviews200responseKind.GetPetReviewsResponseWithPresenceVariant:
    GetPetReviews_Response_WithPresenceValue*: GetPetReviewsResponseWithPresence
  of GetPetReviews200responseKind.ApiResponseVariant:
    ApiResponseValue*: ApiResponse

proc to*(node: JsonNode, T: typedesc[GetPetReviews200response]): GetPetReviews200response =
  ## Custom deserializer for anyOf type - tries each variant
  try:
    return GetPetReviews200response(kind: GetPetReviews200responseKind.GetPetReviewsResponseWithPresenceVariant, GetPetReviews_Response_WithPresenceValue: to(node, GetPetReviewsResponseWithPresence))
  except Exception as e:
    when defined(debug):
      echo "Failed to deserialize as GetPetReviewsResponseWithPresence: ", e.msg
  try:
    return GetPetReviews200response(kind: GetPetReviews200responseKind.ApiResponseVariant, ApiResponseValue: to(node, ApiResponse))
  except Exception as e:
    when defined(debug):
      echo "Failed to deserialize as ApiResponse: ", e.msg
  raise newException(ValueError, "Unable to deserialize into any variant of GetPetReviews200response. JSON: " & $node)

