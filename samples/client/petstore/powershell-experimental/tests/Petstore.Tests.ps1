#
# OpenAPI Petstore
# This is a sample server Petstore server. For this sample, you can use the api key `special-key` to test the authorization filters.
# Version: 1.0.0
# Generated by OpenAPI Generator: https://openapi-generator.tech
#

Describe -tag 'PSOpenAPITools' -name 'Integration Tests' {
    Context 'Pet' {
        It 'CRUD tests' {
            $Id = 38369

            # Add pet
            $Pet = New-Pet -Id $Id -Name 'PowerShell' -Category (
                New-Category -Id $Id -Name 'PSCategory'
            ) -PhotoUrls @(
                'http://example.com/foo',
                'http://example.com/bar'
            ) -Tags (
                New-Tag -Id $Id -Name 'PSTag'
            ) -Status Available
            $Result = Invoke-PetApiAddPet -Body $Pet
            
            # Get 
            $Result = Invoke-PetApiGetPetById -petId $Id
            $Result."id" | Should Be 38369
            $Result."name" | Should Be "PowerShell" 
            $Result."status" | Should Be "Available" 

            # Update (form)
            $Result = Invoke-PetApiGetPetById -petId $Id
            #$Result | Select-Object -Property "id" | Should Be 38369
            #$Result | Select-Object -Property "name" | Should Be "PowerShell" 
            #$Result | Select-Object -Property "status" | Should Be "Available" 

        }
    }
}
