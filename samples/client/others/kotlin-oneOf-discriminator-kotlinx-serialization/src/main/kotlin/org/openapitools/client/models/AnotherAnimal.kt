/**
 *
 * Please note:
 * This class is auto generated by OpenAPI Generator (https://openapi-generator.tech).
 * Do not edit this file manually.
 *
 */

@file:Suppress(
    "ArrayInDataClass",
    "EnumEntryName",
    "RemoveRedundantQualifierName",
    "UnusedImport"
)

package org.openapitools.client.models

import org.openapitools.client.models.Bird
import org.openapitools.client.models.Robobird

import kotlinx.serialization.Serializable
import kotlinx.serialization.SerialName
import kotlinx.serialization.Contextual
import kotlinx.serialization.KSerializer
import kotlinx.serialization.Serializer
import kotlinx.serialization.builtins.serializer
import kotlinx.serialization.encoding.Decoder
import kotlinx.serialization.encoding.Encoder
import kotlinx.serialization.SerializationException
import kotlinx.serialization.descriptors.SerialDescriptor
import kotlinx.serialization.descriptors.buildClassSerialDescriptor
import kotlinx.serialization.json.JsonDecoder
import kotlinx.serialization.json.JsonEncoder
import kotlinx.serialization.json.JsonObject
import kotlinx.serialization.json.JsonPrimitive
import kotlinx.serialization.json.jsonObject
import kotlinx.serialization.json.jsonPrimitive

/**
 * 
 *
 */
@Serializable(with = AnotherAnimalSerializer::class)
sealed interface AnotherAnimal {
    @JvmInline
     value class AnotherBirdWrapper(val value: Bird) : AnotherAnimal

    @JvmInline
     value class AnotherRobobirdWrapper(val value: Robobird) : AnotherAnimal

}

object AnotherAnimalSerializer : KSerializer<AnotherAnimal> {
    override val descriptor: SerialDescriptor = buildClassSerialDescriptor("AnotherAnimal")

    override fun serialize(encoder: Encoder, value: AnotherAnimal) {
        require(encoder is JsonEncoder)
        val jsonObject = when (value) {
            is AnotherAnimal.AnotherBirdWrapper -> {
                val jsonMap = encoder.json.encodeToJsonElement(Bird.serializer(), value.value).jsonObject.toMutableMap()
                jsonMap["another_discriminator"] = JsonPrimitive("ANOTHER_BIRD")
                JsonObject(jsonMap)
            }
            is AnotherAnimal.AnotherRobobirdWrapper -> {
                val jsonMap = encoder.json.encodeToJsonElement(Robobird.serializer(), value.value).jsonObject.toMutableMap()
                jsonMap["another_discriminator"] = JsonPrimitive("ANOTHER_ROBOBIRD")
                JsonObject(jsonMap)
            }
        }
        encoder.encodeJsonElement(jsonObject)
    }

    override fun deserialize(decoder: Decoder): AnotherAnimal {
        require(decoder is JsonDecoder)
        val element = decoder.decodeJsonElement().jsonObject

        val discriminatorValue = element["another_discriminator"]?.jsonPrimitive?.content
            ?: throw SerializationException("Missing another_discriminator field")

        return when (discriminatorValue) {
            "ANOTHER_BIRD" -> {
                val decoded = decoder.json.decodeFromJsonElement(Bird.serializer(), element)
                AnotherAnimal.AnotherBirdWrapper(decoded)
            }
            "ANOTHER_ROBOBIRD" -> {
                val decoded = decoder.json.decodeFromJsonElement(Robobird.serializer(), element)
                AnotherAnimal.AnotherRobobirdWrapper(decoded)
            }
            else -> throw SerializationException("Unknown AnotherAnimal another_discriminator: $discriminatorValue")
        }
    }
}

