{-
   OpenAPI Petstore
   This spec is mainly for testing Petstore server and contains fake endpoints, models. Please do not use this for any other purpose. Special characters: \" \\

   OpenAPI spec version: 1.0.0

   NOTE: This file is auto generated by the openapi-generator.
   https://github.com/openapitools/openapi-generator.git
   Do not edit this file manually.
-}


module Data.Animal exposing (Animal(..), decoder, encoder)

import Data.Cat as Cat exposing (Cat)
import Data.Dog as Dog exposing (Dog)
import Json.Decode as Decode exposing (Decoder)
import Json.Decode.Pipeline exposing (optional, required)
import Json.Encode as Encode


type Animal
    = DogType Dog
    | CatType Cat


decoder : Decoder Animal
decoder =
    Decode.field "className" Decode.string
        |> Decode.andThen animalDecoder


animalDecoder : String -> Decoder Animal
animalDecoder tag =
    case tag of
        "Dog" ->
            Decode.map DogType Dog.decoder

        "Cat" ->
            Decode.map CatType Cat.decoder

        _ ->
            Decode.fail <| "Trying to decode Animal, but className " ++ tag ++ " is not supported."


encoder : Animal -> Encode.Value
encoder model =
    case model of
        DogType subModel ->
            Dog.encoder "Dog" subModel

        CatType subModel ->
            Cat.encoder "Cat" subModel
