"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7952],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),c=p(n),h=a,m=c["".concat(l,".").concat(h)]||c[h]||d[h]||o;return n?r.createElement(m,i(i({ref:t},u),{},{components:n})):r.createElement(m,i({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=h;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[c]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1372:function(e,t,n){n.r(t),n.d(t,{assets:function(){return u},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return c}});var r=n(7462),a=n(3366),o=(n(7294),n(3905)),i=["components"],s={id:"faq-generators",title:"FAQ: Generators"},l=void 0,p={unversionedId:"faq-generators",id:"faq-generators",title:"FAQ: Generators",description:"What are some server generator use cases?",source:"@site/../docs/faq-generators.md",sourceDirName:".",slug:"/faq-generators",permalink:"/docs/faq-generators",draft:!1,editUrl:"https://github.com/OpenAPITools/openapi-generator/edit/master/website/../docs/faq-generators.md",tags:[],version:"current",lastUpdatedBy:"Bruno Coelho",lastUpdatedAt:1745676877,formattedLastUpdatedAt:"Apr 26, 2025",frontMatter:{id:"faq-generators",title:"FAQ: Generators"},sidebar:"faq-sidebar",previous:{title:"FAQ: Contributing",permalink:"/docs/faq-contributing"}},u={},c=[{value:"What are some server generator use cases?",id:"what-are-some-server-generator-use-cases",level:3},{value:"Java",id:"java",level:2},{value:"The API client has SSL errors due to an invalid certificate. Is there a way to bypass that?",id:"the-api-client-has-ssl-errors-due-to-an-invalid-certificate-is-there-a-way-to-bypass-that",level:3},{value:"How can I customize the Feign client templates?",id:"how-can-i-customize-the-feign-client-templates",level:3},{value:"Android",id:"android",level:2},{value:"How can I generate an Android SDK?",id:"how-can-i-generate-an-android-sdk",level:3},{value:"C-Sharp",id:"c-sharp",level:2},{value:"How do I fix <code>CSC:  warning CS2002</code> in Xamarin?",id:"how-do-i-fix-csc--warning-cs2002-in-xamarin",level:3},{value:"Objective-C",id:"objective-c",level:2},{value:"How do I run integration test with Petstore ObjC API client?",id:"how-do-i-run-integration-test-with-petstore-objc-api-client",level:3},{value:"Swift",id:"swift",level:2},{value:"How do I run integration test with Petstore Swift API client?",id:"how-do-i-run-integration-test-with-petstore-swift-api-client",level:3},{value:"Which Swift generator is still actively maintained?",id:"which-swift-generator-is-still-actively-maintained",level:3},{value:"How do I implement bearer token authentication with URLSession on the Swift 5 API client?",id:"how-do-i-implement-bearer-token-authentication-with-urlsession-on-the-swift-5-api-client",level:3},{value:"How do I implement bearer token authentication with Alamofire on the Swift 5 API client?",id:"how-do-i-implement-bearer-token-authentication-with-alamofire-on-the-swift-5-api-client",level:3},{value:"How do I implement bearer token authentication with URLSession on the Swift 6 API client?",id:"how-do-i-implement-bearer-token-authentication-with-urlsession-on-the-swift-6-api-client",level:3},{value:"How do I implement bearer token authentication with Alamofire on the Swift 6 API client?",id:"how-do-i-implement-bearer-token-authentication-with-alamofire-on-the-swift-6-api-client",level:3},{value:"How do I migrate from the Swift 5 generator to the swift 6 generator?",id:"how-do-i-migrate-from-the-swift-5-generator-to-the-swift-6-generator",level:3},{value:"TypeScript",id:"typescript",level:2},{value:"The JSON response fails to deserialize due to change in variable naming (snake_case to camelCase). Is there any way to keep the original naming?",id:"the-json-response-fails-to-deserialize-due-to-change-in-variable-naming-snake_case-to-camelcase-is-there-any-way-to-keep-the-original-naming",level:3}],d={toc:c};function h(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h3",{id:"what-are-some-server-generator-use-cases"},"What are some server generator use cases?"),(0,o.kt)("p",null,"We have around 40+ server generators, with more added regularly. Some of these include Spring in your choice of Java or Kotlin, the Finch and Scalatra frameworks using Scala, and C# generators for ASP.NET and Azure Functions (to name only a few)."),(0,o.kt)("p",null,"Besides generating the server code as a starting point to implement the API backend, here are some use cases of the server generators:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"prototyping")," - one can generate the server code and have a functional API backend very quickly to try different things or features."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"mocking")," - easily provide an API backend for mocking based on the examples field defined in the response object."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"migration")," - let's say one wants to migrate an API backend from Ruby on Rails to Java Spring. The server generator can save a lot of time in implementing and verify each endpoint in the new API backend."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"evaluating"),' - when you want to try a new language or framework, and a typical "Hello, World" is too trivial.')),(0,o.kt)("h2",{id:"java"},"Java"),(0,o.kt)("h3",{id:"the-api-client-has-ssl-errors-due-to-an-invalid-certificate-is-there-a-way-to-bypass-that"},"The API client has SSL errors due to an invalid certificate. Is there a way to bypass that?"),(0,o.kt)("p",null,"Yes, please refer to ",(0,o.kt)("a",{parentName:"p",href:"http://stackoverflow.com/a/6055903/677735"},"http://stackoverflow.com/a/6055903/677735")),(0,o.kt)("h3",{id:"how-can-i-customize-the-feign-client-templates"},"How can I customize the Feign client templates?"),(0,o.kt)("p",null,"You will need to provide customized files in ",(0,o.kt)("inlineCode",{parentName:"p"},"Java/libraries/feign")," under the resources folder and pass the location via the ",(0,o.kt)("inlineCode",{parentName:"p"},"-t")," option."),(0,o.kt)("p",null,"In your Gradle build script, please add the following (example):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"config.templateDir = 'src/openapi-generator-templates/Java/libraries/feign\n")),(0,o.kt)("h2",{id:"android"},"Android"),(0,o.kt)("h3",{id:"how-can-i-generate-an-android-sdk"},"How can I generate an Android SDK?"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"The Java SDK is also compatible with Android.")),(0,o.kt)("p",null,"[RECOMMENDED]"," To generate the Java SDK with ",(0,o.kt)("inlineCode",{parentName:"p"},"okhttp")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"gson")," libraries, run the following:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"mvn clean package\njava -jar modules/openapi-generator-cli/target/openapi-generator-cli.jar generate \\\n  -i https://raw.githubusercontent.com/OpenAPITools/openapi-generator/master/modules/openapi-generator/src/test/resources/3_0/petstore.json \\\n  -l java --library=okhttp-gson \\\n  --additional-properties hideGenerationTimestamp=true \\\n  -o /var/tmp/java/okhttp-gson/ \n")),(0,o.kt)("p",null,"You can also generate the Java SDK with other HTTP libraries by replacing ",(0,o.kt)("inlineCode",{parentName:"p"},"okhttp-gson")," with ",(0,o.kt)("inlineCode",{parentName:"p"},"retrofit")," for example. For a list of support libraries, please run"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"java -jar modules/openapi-generator-cli/target/openapi-generator-cli.jar config-help -l java\n")),(0,o.kt)("p",null,"To generate the Android SDK with ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/mcxiaoke/android-volley"},(0,o.kt)("inlineCode",{parentName:"a"},"volley")),", please run"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"mvn clean package\njava -jar modules/openapi-generator-cli/target/openapi-generator-cli.jar generate \\\n  -i https://raw.githubusercontent.com/OpenAPITools/openapi-generator/master/modules/openapi-generator/src/test/resources/3_0/petstore.json \\\n  -l android --library=volley \\\n  -o /var/tmp/android/volley/ \n")),(0,o.kt)("p",null,"We do ",(0,o.kt)("strong",{parentName:"p"},"not")," recommend using the default HTTP library (Apache HttpClient) with ",(0,o.kt)("inlineCode",{parentName:"p"},"android")," as it's not actively maintained."),(0,o.kt)("h2",{id:"c-sharp"},"C-Sharp"),(0,o.kt)("h3",{id:"how-do-i-fix-csc--warning-cs2002-in-xamarin"},"How do I fix ",(0,o.kt)("inlineCode",{parentName:"h3"},"CSC:  warning CS2002")," in Xamarin?"),(0,o.kt)("p",null,"The full warning might look like this: ",(0,o.kt)("inlineCode",{parentName:"p"},"CSC:  warning CS2002: Source file 'Api/FakeApi.cs' specified multiple times")),(0,o.kt)("p",null,"The warning has no impact on the build process so you should be able to build the solution without issue. The warning should be addressed in the upcoming stable release of Xamarin. "),(0,o.kt)("h2",{id:"objective-c"},"Objective-C"),(0,o.kt)("h3",{id:"how-do-i-run-integration-test-with-petstore-objc-api-client"},"How do I run integration test with Petstore ObjC API client?"),(0,o.kt)("p",null,"Here are the steps:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone https://github.com/openapitools/openapi-generator.git\ncd openapi-generator/samples/client/petstore/objc/default/OpenAPIClientTests\nmvn integration-test\n")),(0,o.kt)("p",null,"Besides ",(0,o.kt)("inlineCode",{parentName:"p"},"default")," (folder) ObjC API client, there's also ",(0,o.kt)("inlineCode",{parentName:"p"},"core-data")," for another ObjC API client with ",(0,o.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Core_Data"},"Core Data support"),"."),(0,o.kt)("h2",{id:"swift"},"Swift"),(0,o.kt)("h3",{id:"how-do-i-run-integration-test-with-petstore-swift-api-client"},"How do I run integration test with Petstore Swift API client?"),(0,o.kt)("p",null,"Here are the steps:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"git clone https://github.com/openapitools/openapi-generator.git\ncd openapi-generator/samples/client/petstore/swift/default/OpenAPIClientTests\nmvn integration-test\n")),(0,o.kt)("h3",{id:"which-swift-generator-is-still-actively-maintained"},"Which Swift generator is still actively maintained?"),(0,o.kt)("p",null,"Please use ",(0,o.kt)("inlineCode",{parentName:"p"},"swift5")," generator because Swift 4.x is deprecated.\nThere is a new ",(0,o.kt)("inlineCode",{parentName:"p"},"swift6")," generator, that is currently in beta, try it and give us your feedback."),(0,o.kt)("h3",{id:"how-do-i-implement-bearer-token-authentication-with-urlsession-on-the-swift-5-api-client"},"How do I implement bearer token authentication with URLSession on the Swift 5 API client?"),(0,o.kt)("p",null,"First you subclass RequestBuilderFactory"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    class BearerRequestBuilderFactory: RequestBuilderFactory {\n        func getNonDecodableBuilder<T>() -> RequestBuilder<T>.Type {\n            BearerRequestBuilder<T>.self\n        }\n\n        func getBuilder<T: Decodable>() -> RequestBuilder<T>.Type {\n            BearerDecodableRequestBuilder<T>.self\n        }\n    }\n")),(0,o.kt)("p",null,"Then you subclass URLSessionRequestBuilder and URLSessionDecodableRequestBuilder"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    class BearerRequestBuilder<T>: URLSessionRequestBuilder<T> {\n        @discardableResult\n        override func execute(_ apiResponseQueue: DispatchQueue = PetstoreClientAPI.apiResponseQueue, _ completion: @escaping (Result<Response<T>, ErrorResponse>) -> Void) -> RequestTask {\n    \n            // Before making the request, we can validate if we have a bearer token to be able to make a request\n            BearerTokenHandler.refreshTokenIfDoesntExist {\n                \n                // Here we make the request\n                super.execute(apiResponseQueue) { result in\n                    \n                    switch result {\n                    case .success:\n                        // If we got a successful response, we send the response to the completion block\n                        completion(result)\n                        \n                    case let .failure(error):\n                        \n                        // If we got a failure response, we will analyse the error to see what we should do with it\n                        if case let ErrorResponse.error(_, data, response, error) = error {\n                            \n                            // If the error is an ErrorResponse.error() we will analyse it to see if it's a 401, and if it's a 401, we will refresh the token and retry the request\n                            BearerTokenHandler.refreshTokenIfUnauthorizedRequestResponse(\n                                data: data,\n                                response: response,\n                                error: error\n                            ) { wasTokenRefreshed in\n                                \n                                if wasTokenRefreshed {\n                                    // If the token was refreshed, it's because it was a 401 error, so we refreshed the token, and we are going to retry the request by calling self.execute()\n                                    self.execute(apiResponseQueue, completion)\n                                } else {\n                                    // If the token was not refreshed, it's because it was not a 401 error, so we send the response to the completion block\n                                    completion(result)\n                                }\n                            }\n                        } else {\n                            // If it's an unknown error, we send the response to the completion block\n                            completion(result)\n                        }\n                        \n                    }\n                }\n            }\n            \n            return requestTask\n        }\n    }\n    \n    class BearerDecodableRequestBuilder<T: Decodable>: URLSessionDecodableRequestBuilder<T> {\n        @discardableResult\n        override func execute(_ apiResponseQueue: DispatchQueue = PetstoreClientAPI.apiResponseQueue, _ completion: @escaping (Result<Response<T>, ErrorResponse>) -> Void) -> RequestTask {\n            // Before making the request, we can validate if we have a bearer token to be able to make a request\n            BearerTokenHandler.refreshTokenIfDoesntExist {\n                \n                // Here we make the request\n                super.execute(apiResponseQueue) { result in\n                    \n                    switch result {\n                    case .success:\n                        // If we got a successful response, we send the response to the completion block\n                        completion(result)\n                        \n                    case let .failure(error):\n                        \n                        // If we got a failure response, we will analyse the error to see what we should do with it\n                        if case let ErrorResponse.error(_, data, response, error) = error {\n                            \n                            // If the error is an ErrorResponse.error() we will analyse it to see if it's a 401, and if it's a 401, we will refresh the token and retry the request\n                            BearerTokenHandler.refreshTokenIfUnauthorizedRequestResponse(\n                                data: data,\n                                response: response,\n                                error: error\n                            ) { wasTokenRefreshed in\n                                \n                                if wasTokenRefreshed {\n                                    // If the token was refreshed, it's because it was a 401 error, so we refreshed the token, and we are going to retry the request by calling self.execute()\n                                    self.execute(apiResponseQueue, completion)\n                                } else {\n                                    // If the token was not refreshed, it's because it was not a 401 error, so we send the response to the completion block\n                                    completion(result)\n                                }\n                            }\n                        } else {\n                            // If it's an unknown error, we send the response to the completion block\n                            completion(result)\n                        }\n                        \n                    }\n                }\n            }\n            \n            return requestTask\n        }\n    }\n    \n    class BearerTokenHandler {\n        private static var bearerToken: String? = nil\n        \n        static func refreshTokenIfDoesntExist(completionHandler: @escaping () -> Void) {\n            if bearerToken != nil {\n                completionHandler()\n            } else {\n                startRefreshingToken {\n                    completionHandler()\n                }\n            }\n        }\n        \n        static func refreshTokenIfUnauthorizedRequestResponse(data: Data?, response: URLResponse?, error: Error?, completionHandler: @escaping (Bool) -> Void) {\n            if let response = response as? HTTPURLResponse, response.statusCode == 401 {\n                startRefreshingToken {\n                    completionHandler(true)\n                }\n            } else {\n                completionHandler(false)\n            }\n        }\n        \n        private static func startRefreshingToken(completionHandler: @escaping () -> Void) {\n            // Get a bearer token\n            let dummyBearerToken = \"...\"\n            \n            bearerToken = dummyBearerToken\n            PetstoreClientAPI.customHeaders[\"Authorization\"] = \"Bearer \\(dummyBearerToken)\"\n    \n            completionHandler()\n        }\n    }\n")),(0,o.kt)("p",null,"Then you assign the ",(0,o.kt)("inlineCode",{parentName:"p"},"BearerRequestBuilderFactory")," to the property ",(0,o.kt)("inlineCode",{parentName:"p"},"requestBuilderFactory"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"PetstoreClientAPI.requestBuilderFactory = BearerRequestBuilderFactory()")),(0,o.kt)("p",null,"The name ",(0,o.kt)("inlineCode",{parentName:"p"},"PetstoreClientAPI.requestBuilderFactory")," will change depending on your project name."),(0,o.kt)("p",null,"Here is a working sample that put's together all of this.\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift5/urlsessionLibrary/SwaggerClientTests/SwaggerClient/AppDelegate.swift"},"AppDelegate.swift"),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift5/urlsessionLibrary/SwaggerClientTests/SwaggerClient/BearerDecodableRequestBuilder.swift"},"BearerDecodableRequestBuilder.swift")),(0,o.kt)("h3",{id:"how-do-i-implement-bearer-token-authentication-with-alamofire-on-the-swift-5-api-client"},"How do I implement bearer token authentication with Alamofire on the Swift 5 API client?"),(0,o.kt)("p",null,"First you subclass RequestBuilderFactory"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    class BearerRequestBuilderFactory: RequestBuilderFactory {\n        func getNonDecodableBuilder<T>() -> RequestBuilder<T>.Type {\n            BearerRequestBuilder<T>.self\n        }\n        \n        func getBuilder<T: Decodable>() -> RequestBuilder<T>.Type {\n            BearerDecodableRequestBuilder<T>.self\n        }\n    }\n")),(0,o.kt)("p",null,"Then you subclass AlamofireRequestBuilder and AlamofireDecodableRequestBuilder"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'    class BearerRequestBuilder<T>: AlamofireRequestBuilder<T> {\n        override func createSessionManager() -> SessionManager {\n            let sessionManager = super.createSessionManager()\n            \n            let bearerTokenHandler = BearerTokenHandler()\n            sessionManager.adapter = bearerTokenHandler\n            sessionManager.retrier = bearerTokenHandler\n            \n            return sessionManager\n        }\n    }\n\n    class BearerDecodableRequestBuilder<T: Decodable>: AlamofireDecodableRequestBuilder<T> {\n        override func createSessionManager() -> SessionManager {\n            let sessionManager = super.createSessionManager()\n            \n            let bearerTokenHandler = BearerTokenHandler()\n            sessionManager.adapter = bearerTokenHandler\n            sessionManager.retrier = bearerTokenHandler\n            \n            return sessionManager\n        }\n    }\n\n    class BearerTokenHandler: RequestAdapter, RequestRetrier {\n        private static var bearerToken: String? = nil\n        \n        func adapt(_ urlRequest: URLRequest) throws -> URLRequest {\n            if let bearerToken = Self.bearerToken {\n                var urlRequest = urlRequest\n                urlRequest.setValue("Bearer \\(bearerToken)", forHTTPHeaderField: "Authorization")\n                return urlRequest\n            }\n            \n            return urlRequest\n        }\n        \n        func should(_: SessionManager, retry request: Request, with _: Error, completion: @escaping RequestRetryCompletion) {\n            if let response = request.task?.response as? HTTPURLResponse, response.statusCode == 401 {\n                Self.startRefreshingToken { isTokenRefreshed in\n                    completion(isTokenRefreshed, 0.0)\n                }\n            } else {\n                completion(false, 0.0)\n            }\n        }\n        \n        private static func startRefreshingToken(completionHandler: @escaping (Bool) -> Void) {\n            // Get a bearer token\n            let dummyBearerToken = "..."\n            \n            bearerToken = dummyBearerToken\n            PetstoreClientAPI.customHeaders["Authorization"] = "Bearer \\(dummyBearerToken)"\n            \n            completionHandler(true)\n        }\n    }\n')),(0,o.kt)("p",null,"Then you assign the ",(0,o.kt)("inlineCode",{parentName:"p"},"BearerRequestBuilderFactory")," to the property ",(0,o.kt)("inlineCode",{parentName:"p"},"requestBuilderFactory"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"PetstoreClientAPI.requestBuilderFactory = BearerRequestBuilderFactory()")),(0,o.kt)("p",null,"The name ",(0,o.kt)("inlineCode",{parentName:"p"},"PetstoreClientAPI.requestBuilderFactory")," will change depending on your project name."),(0,o.kt)("p",null,"Here is a working sample that put's together all of this.\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift5/alamofireLibrary/SwaggerClientTests/SwaggerClient/AppDelegate.swift"},"AppDelegate.swift"),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift5/alamofireLibrary/SwaggerClientTests/SwaggerClient/BearerDecodableRequestBuilder.swift"},"BearerTokenHandler.swift")),(0,o.kt)("h3",{id:"how-do-i-implement-bearer-token-authentication-with-urlsession-on-the-swift-6-api-client"},"How do I implement bearer token authentication with URLSession on the Swift 6 API client?"),(0,o.kt)("p",null,"First you implement the ",(0,o.kt)("inlineCode",{parentName:"p"},"OpenAPIInterceptor")," protocol."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'public class BearerOpenAPIInterceptor: OpenAPIInterceptor {\n    public init() {}\n    \n    public func intercept<T>(urlRequest: URLRequest, urlSession: URLSessionProtocol, requestBuilder: RequestBuilder<T>, completion: @escaping (Result<URLRequest, any Error>) -> Void) {\n\n        guard requestBuilder.requiresAuthentication else {\n            // no authentication required\n            completion(.success(urlRequest))\n            return\n        }\n\n        refreshTokenIfDoesntExist { token in\n            \n            // Change the current url request\n            var newUrlRequest = urlRequest\n            newUrlRequest.setValue("Bearer \\(token)", forHTTPHeaderField: "Authorization")\n            \n            // Change the global headers\n            requestBuilder.openAPIClient.customHeaders["Authorization"] = "Bearer \\(token)"\n            \n            completion(.success(newUrlRequest))\n        }\n    }\n    \n    public func retry<T>(urlRequest: URLRequest, urlSession: URLSessionProtocol, requestBuilder: RequestBuilder<T>, data: Data?, response: URLResponse?, error: Error, completion: @escaping (OpenAPIInterceptorRetry) -> Void) {\n        // We will analyse the response to see if it\'s a 401, and if it\'s a 401, we will refresh the token and retry the request\n        refreshTokenIfUnauthorizedRequestResponse(\n            data: data,\n            response: response,\n            error: error\n        ) { (wasTokenRefreshed, newToken) in\n            \n            if wasTokenRefreshed, let newToken = newToken {\n                \n                // Change the global headers\n                requestBuilder.openAPIClient.customHeaders["Authorization"] = "Bearer \\(newToken)"\n                \n                completion(.retry)\n            } else {\n                // If the token was not refreshed, it\'s because it was not a 401 error, so we send the response to the completion block\n                completion(.dontRetry)\n            }\n        }\n    }\n    \n    private var bearerToken: String? = nil\n    \n    func refreshTokenIfDoesntExist(completionHandler: @escaping (String) -> Void) {\n        if let bearerToken = bearerToken {\n            completionHandler(bearerToken)\n        } else {\n            startRefreshingToken { token in\n                completionHandler(token)\n            }\n        }\n    }\n    \n    func refreshTokenIfUnauthorizedRequestResponse(data: Data?, response: URLResponse?, error: Error, completionHandler: @escaping (Bool, String?) -> Void) {\n        if let response = response as? HTTPURLResponse, response.statusCode == 401 {\n            startRefreshingToken { token in\n                completionHandler(true, token)\n            }\n        } else {\n            completionHandler(false, nil)\n        }\n    }\n    \n    private func startRefreshingToken(completionHandler: @escaping (String) -> Void) {\n        // Get a bearer token\n        let dummyBearerToken = "..."\n        \n        bearerToken = dummyBearerToken\n\n        completionHandler(dummyBearerToken)\n    }\n}\n')),(0,o.kt)("p",null,"Then you assign the ",(0,o.kt)("inlineCode",{parentName:"p"},"BearerOpenAPIInterceptor")," to the property ",(0,o.kt)("inlineCode",{parentName:"p"},"OpenAPIClient.shared.interceptor"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"OpenAPIClient.shared.interceptor = BearerOpenAPIInterceptor()")),(0,o.kt)("p",null,"Here is a working sample that put's together all of this.\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift6/urlsessionLibrary/SwaggerClientTests/SwaggerClient/AppDelegate.swift"},"AppDelegate.swift"),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift5/urlsessionLibrary/SwaggerClientTests/SwaggerClient/BearerDecodableRequestBuilder.swift"},"BearerTokenHandler.swift")),(0,o.kt)("h3",{id:"how-do-i-implement-bearer-token-authentication-with-alamofire-on-the-swift-6-api-client"},"How do I implement bearer token authentication with Alamofire on the Swift 6 API client?"),(0,o.kt)("p",null,"First implement the ",(0,o.kt)("inlineCode",{parentName:"p"},"Alamofire")," ",(0,o.kt)("inlineCode",{parentName:"p"},"RequestInterceptor")," protocol."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},'class BearerTokenHandler: RequestInterceptor, @unchecked Sendable {\n    private var bearerToken: String? = nil\n    \n    func adapt(_ urlRequest: URLRequest, for session: Session, completion: @escaping (Result<URLRequest, Error>) -> Void) {\n        if let bearerToken = bearerToken {\n            var urlRequest = urlRequest\n            urlRequest.setValue("Bearer \\(bearerToken)", forHTTPHeaderField: "Authorization")\n            \n            completion(.success(urlRequest))\n            return\n        }\n        \n        completion(.success(urlRequest))\n    }\n    \n    func retry(_ request: Request, for session: Session, dueTo error: Error, completion: @escaping (RetryResult) -> Void) {\n        if let response = request.task?.response as? HTTPURLResponse, response.statusCode == 401 {\n            startRefreshingToken { isTokenRefreshed in\n                completion(.retry)\n            }\n        } else {\n            completion(.doNotRetryWithError(error))\n        }\n    }\n    \n    private func startRefreshingToken(completionHandler: @escaping (Bool) -> Void) {\n        // Get a bearer token\n        let dummyBearerToken = "..."\n        \n        bearerToken = dummyBearerToken\n        OpenAPIClient.shared.customHeaders["Authorization"] = "Bearer \\(dummyBearerToken)"\n        \n        completionHandler(true)\n    }\n}\n')),(0,o.kt)("p",null,"Then you assign the ",(0,o.kt)("inlineCode",{parentName:"p"},"BearerTokenHandler")," to the property ",(0,o.kt)("inlineCode",{parentName:"p"},"OpenAPIClient.shared.interceptor"),"."),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"OpenAPIClient.shared.interceptor = BearerTokenHandler()")),(0,o.kt)("p",null,"Here is a working sample that put's together all of this.\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift6/alamofireLibrary/SwaggerClientTests/SwaggerClient/AppDelegate.swift"},"AppDelegate.swift"),"\n",(0,o.kt)("a",{parentName:"p",href:"https://github.com/OpenAPITools/openapi-generator/blob/master/samples/client/petstore/swift6/alamofireLibrary/SwaggerClientTests/SwaggerClient/BearerTokenHandler.swift"},"BearerTokenHandler.swift")),(0,o.kt)("h3",{id:"how-do-i-migrate-from-the-swift-5-generator-to-the-swift-6-generator"},"How do I migrate from the Swift 5 generator to the swift 6 generator?"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Change the generator to the new ",(0,o.kt)("inlineCode",{parentName:"li"},"swift6")," generator, e.g. ",(0,o.kt)("inlineCode",{parentName:"li"},"openapi-generator generate -i https://raw.githubusercontent.com/openapitools/openapi-generator/master/modules/openapi-generator/src/test/resources/3_0/petstore.yaml -g swift6 -o /tmp/test/")),(0,o.kt)("li",{parentName:"ul"},"Check the ",(0,o.kt)("inlineCode",{parentName:"li"},"swift6")," ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/OpenAPITools/openapi-generator/tree/master/samples/client/petstore/swift6/urlsessionLibrary"},"URLSession")," and ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/OpenAPITools/openapi-generator/tree/master/samples/client/petstore/swift6/alamofireLibrary"},"Alamofire")," samples."),(0,o.kt)("li",{parentName:"ul"},"The infrastructure files have been moved to a new directory called ",(0,o.kt)("inlineCode",{parentName:"li"},"Infrastructure"),". Please delete the old ones."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"AnyCodable")," dependency has been removed and replaced with a new enum called ",(0,o.kt)("inlineCode",{parentName:"li"},"JSONValue"),", allowing you to use this generator without external dependencies."),(0,o.kt)("li",{parentName:"ul"},"The ",(0,o.kt)("inlineCode",{parentName:"li"},"Combine")," response is now deferred by default, meaning the request will only start when you begin listening to it. To restore the previous behavior, set the ",(0,o.kt)("inlineCode",{parentName:"li"},"combineDeferred")," flag to ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,o.kt)("li",{parentName:"ul"},"A new configuration, ",(0,o.kt)("inlineCode",{parentName:"li"},"apiStaticMethod"),", allows you to use instance methods instead of class methods for API calls. For more information, check the sample project ",(0,o.kt)("a",{parentName:"li",href:"https://github.com/OpenAPITools/openapi-generator/tree/master/samples/client/petstore/swift6/apiNonStaticMethod"},"apiNonStaticMethod"),"."),(0,o.kt)("li",{parentName:"ul"},"The new default response is based on async/await. To revert to the previous behavior, set the ",(0,o.kt)("inlineCode",{parentName:"li"},"responseAs")," flag to ",(0,o.kt)("inlineCode",{parentName:"li"},"ObjcBlock"),"."),(0,o.kt)("li",{parentName:"ul"},"The default project structure now follows the SPM (Swift Package Manager) structure. To revert to the old structure, set the ",(0,o.kt)("inlineCode",{parentName:"li"},"useSPMFileStructure")," flag to ",(0,o.kt)("inlineCode",{parentName:"li"},"false"),"."),(0,o.kt)("li",{parentName:"ul"},"The former ",(0,o.kt)("inlineCode",{parentName:"li"},"{{projectName}}API")," is now called ",(0,o.kt)("inlineCode",{parentName:"li"},"{{projectName}}APIConfiguration"),"."),(0,o.kt)("li",{parentName:"ul"},"You can now set a request interceptor and retrier by configuring ",(0,o.kt)("inlineCode",{parentName:"li"},"OpenAPIClient.shared.interceptor"),", making authenticated requests easier to manage."),(0,o.kt)("li",{parentName:"ul"},"The protocol ",(0,o.kt)("inlineCode",{parentName:"li"},"JSONEncodable")," was renamed to ",(0,o.kt)("inlineCode",{parentName:"li"},"ParameterConvertible"),"."),(0,o.kt)("li",{parentName:"ul"},"The flag ",(0,o.kt)("inlineCode",{parentName:"li"},"useJSONEncodable")," was renamed to ",(0,o.kt)("inlineCode",{parentName:"li"},"useParameterConvertible"),".")),(0,o.kt)("h2",{id:"typescript"},"TypeScript"),(0,o.kt)("h3",{id:"the-json-response-fails-to-deserialize-due-to-change-in-variable-naming-snake_case-to-camelcase-is-there-any-way-to-keep-the-original-naming"},"The JSON response fails to deserialize due to change in variable naming (snake_case to camelCase). Is there any way to keep the original naming?"),(0,o.kt)("p",null,"Yes, please use the following option when generating TypeScript clients:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"    modelPropertyNaming\n        Naming convention for the property: 'camelCase', 'PascalCase', 'snake_case' and 'original', which keeps the original name (Default: camelCase)\n")))}h.isMDXComponent=!0}}]);